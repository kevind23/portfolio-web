!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a,b){function c(a){function b(a){d?(c(),M(b),e=!0,d=!1):e=!1}var c=a,d=!1,e=!1;this.kick=function(a){d=!0,e||b()},this.end=function(a){var b=c;a&&(e?(c=d?function(){b(),a()}:a,d=!0):a())}}function d(){return!0}function e(){return!1}function f(a){a.preventDefault()}function g(a){N[a.target.tagName.toLowerCase()]||a.preventDefault()}function h(a){return 1===a.which&&!a.ctrlKey&&!a.altKey}function i(a,b){var c,d;if(a.identifiedTouch)return a.identifiedTouch(b);for(c=-1,d=a.length;++c<d;)if(a[c].identifier===b)return a[c]}function j(a,b){var c=i(a.changedTouches,b.identifier);if(c&&(c.pageX!==b.pageX||c.pageY!==b.pageY))return c}function k(a){var b;h(a)&&(b={target:a.target,startX:a.pageX,startY:a.pageY,timeStamp:a.timeStamp},J(document,O.move,l,b),J(document,O.cancel,m,b))}function l(a){var b=a.data;s(a,b,a,n)}function m(a){n()}function n(){K(document,O.move,l),K(document,O.cancel,m)}function o(a){var b,c;N[a.target.tagName.toLowerCase()]||(b=a.changedTouches[0],c={target:b.target,startX:b.pageX,startY:b.pageY,timeStamp:a.timeStamp,identifier:b.identifier},J(document,P.move+"."+b.identifier,p,c),J(document,P.cancel+"."+b.identifier,q,c))}function p(a){var b=a.data,c=j(a,b);c&&s(a,b,c,r)}function q(a){var b=a.data,c=i(a.changedTouches,b.identifier);c&&r(b.identifier)}function r(a){K(document,"."+a,p),K(document,"."+a,q)}function s(a,b,c,d){var e=c.pageX-b.startX,f=c.pageY-b.startY;I*I>e*e+f*f||v(a,b,c,e,f,d)}function t(){return this._handled=d,!1}function u(a){a._handled()}function v(a,b,c,d,e,f){var g,h;b.target;g=a.targetTouches,h=a.timeStamp-b.timeStamp,b.type="movestart",b.distX=d,b.distY=e,b.deltaX=d,b.deltaY=e,b.pageX=c.pageX,b.pageY=c.pageY,b.velocityX=d/h,b.velocityY=e/h,b.targetTouches=g,b.finger=g?g.length:1,b._handled=t,b._preventTouchmoveDefault=function(){a.preventDefault()},L(b.target,b),f(b.identifier)}function w(a){var b=a.data.timer;a.data.touch=a,a.data.timeStamp=a.timeStamp,b.kick()}function x(a){var b=a.data.event,c=a.data.timer;y(),D(b,c,function(){setTimeout(function(){K(b.target,"click",e)},0)})}function y(a){K(document,O.move,w),K(document,O.end,x)}function z(a){var b=a.data.event,c=a.data.timer,d=j(a,b);d&&(a.preventDefault(),b.targetTouches=a.targetTouches,a.data.touch=d,a.data.timeStamp=a.timeStamp,c.kick())}function A(a){var b=a.data.event,c=a.data.timer,d=i(a.changedTouches,b.identifier);d&&(B(b),D(b,c))}function B(a){K(document,"."+a.identifier,z),K(document,"."+a.identifier,A)}function C(a,b,c,d){var e=c-a.timeStamp;a.type="move",a.distX=b.pageX-a.startX,a.distY=b.pageY-a.startY,a.deltaX=b.pageX-a.pageX,a.deltaY=b.pageY-a.pageY,a.velocityX=.3*a.velocityX+.7*a.deltaX/e,a.velocityY=.3*a.velocityY+.7*a.deltaY/e,a.pageX=b.pageX,a.pageY=b.pageY}function D(a,b,c){b.end(function(){return a.type="moveend",L(a.target,a),c&&c()})}function E(a,b,c){return J(this,"movestart.move",u),!0}function F(a){return K(this,"dragstart drag",f),K(this,"mousedown touchstart",g),K(this,"movestart",u),!0}function G(a){"move"!==a.namespace&&"moveend"!==a.namespace&&(J(this,"dragstart."+a.guid+" drag."+a.guid,f,b,a.selector),J(this,"mousedown."+a.guid,g,b,a.selector))}function H(a){"move"!==a.namespace&&"moveend"!==a.namespace&&(K(this,"dragstart."+a.guid+" drag."+a.guid),K(this,"mousedown."+a.guid))}var I=6,J=a.event.add,K=a.event.remove,L=function(b,c,d){a.event.trigger(c,d,b)},M=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(function(){a()},25)}}(),N={textarea:!0,input:!0,select:!0,button:!0},O={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},P={move:"touchmove",cancel:"touchend",end:"touchend"};a.event.special.movestart={setup:E,teardown:F,add:G,remove:H,_default:function(a){function d(b){C(f,g.touch,g.timeStamp),L(a.target,f)}var f,g;a._handled()&&(f={target:a.target,startX:a.startX,startY:a.startY,pageX:a.pageX,pageY:a.pageY,distX:a.distX,distY:a.distY,deltaX:a.deltaX,deltaY:a.deltaY,velocityX:a.velocityX,velocityY:a.velocityY,timeStamp:a.timeStamp,identifier:a.identifier,targetTouches:a.targetTouches,finger:a.finger},g={event:f,timer:new c(d),touch:b,timeStamp:b},a.identifier===b?(J(a.target,"click",e),J(document,O.move,w,g),J(document,O.end,x,g)):(a._preventTouchmoveDefault(),J(document,P.move+"."+a.identifier,z,g),J(document,P.end+"."+a.identifier,A,g)))}},a.event.special.move={setup:function(){J(this,"movestart.move",a.noop)},teardown:function(){K(this,"movestart.move",a.noop)}},a.event.special.moveend={setup:function(){J(this,"movestart.moveend",a.noop)},teardown:function(){K(this,"movestart.moveend",a.noop)}},J(document,"mousedown.move",k),J(document,"touchstart.move",o),"function"==typeof Array.prototype.indexOf&&!function(a,b){for(var c=["changedTouches","targetTouches"],d=c.length;d--;)-1===a.event.props.indexOf(c[d])&&a.event.props.push(c[d])}(a)}),function(a,b,c,d){function e(){this.pages={},this.sequence=[],this.state={index:-1,path:null,lastPath:null,animate:null},this.assemblePages(c("[data-path]")),a.location.pathname.match(/[^\/]/)?this.setPageByPathName(a.location.pathname):(c('[data-path="/"]').addClass("page-active"),this.setPageByPathName("/")),a.onpopstate=this.onPopState.bind(this);var b=this;a.onresize=function(){b.resizeTimeout||(b.resizeTimeout=a.setTimeout(b.recalculate.bind(b),150))}}function f(b,c){var e;return c=c||200,function(){null!==e&&e!==d||a.setTimeout(function(){b(),e=null},c)}}function g(){var a=c(this);"none"!==a.css("display")&&a.attr("src",a.attr("data-src")).removeAttr("data-src")}var h={right:0,left:-1},i={0:"right","-1":"left"};e.prototype={setPageByPathName:function(d,e){return this.pages[d]?(e=e||(this.pages[d].idx>this.state.index?"right":"left"),this.state.animate^h[e]&&this.state.lastPath===d&&a.history&&a.history.replaceState?(this.animationDirection=e,a.history.back(),!0):(this.state={index:this.pages[d].idx,path:d,lastPath:this.state.path,animate:h[e]},a.history&&a.history.pushState&&a.history.pushState(this.state,null,d),this.activatePage(this.pages[d].$set,e),c(b.body).attr("data-active-page",this.state.path),!0)):!1},onPopState:function(b){this.state=b.state,a.history.replaceState(this.state,null,this.state.path);var c=null===b.state.lastPath?this.animationDirection:i[~this.state.animate];this.activatePage(this.pages[this.state.path].$set,c)},setPageByIndex:function(a,b){return a>=0&&a<this.sequence.length?this.setPageByPathName(this.sequence[a],b):!1},nextPage:function(){return this.setPageByIndex(this.state.index+1<this.sequence.length?this.state.index+1:0,"right")},prevPage:function(){return this.setPageByIndex(this.state.index-1>=0?this.state.index-1:this.sequence.length-1,"left")},assemblePages:function(a){var b=0,d=this;a.each(function(){var e=c(this).attr("data-path");d.pages[e]||(d.sequence[b]=e,d.pages[e]={$set:a.filter('[data-path="'+e+'"]'),idx:b},b++)})},activatePage:function(b,d){var e="left"==d?"right":"left";this.$active&&this.$active.removeClass("animate").removeClass("hidden-left hidden-right").addClass("animate hidden-"+e).removeClass("page-active"),this.$active=b,this.$active.show().removeClass("animate").removeClass("hidden-left hidden-right").addClass("hidden-"+d);var f=this.$active;a.setTimeout(function(){f.addClass("animate page-active")},10),a.setTimeout(function(){c(".hidden-left, .hidden-right").filter(":not(.page-active)").hide().removeClass("animate hidden-left hidden-right")},425),this.recalculate()},recalculate:function(){delete this.resizeTimeout,c(".footer").css("transform","translateY("+this.$active.height()+"px)"),c(".page").css("padding-bottom",this.$active.height())}},a.showcase=new e;var j=a.showcase.prevPage.bind(a.showcase),k=a.showcase.nextPage.bind(a.showcase);c(".left-arrow").on("click",j),c(".right-arrow").on("click",k),c(b).on("movestart",function(a){a.distX>a.distY&&a.distX<-a.distY||a.distX<a.distY&&a.distX>-a.distY?a.preventDefault():a.distX>10?j():a.distX<-10&&k()}),c(b).keydown(function(b){var c=null!==b.which?b.which:null!==b.charCode?b.charCode:b.keyCode;switch(c){case 39:a.showcase.nextPage();break;case 37:a.showcase.prevPage()}}),c(a).on("load",function(){a.showcase.$active.find("img[data-src]").each(g),c("img[data-src]").each(g)}).on("resize",f(function(){c("img[data-src]").each(g)})),c(b).on("ready",function(){a.innerWidth>640&&c(".left-arrow, .right-arrow").addClass("hover").delay(1800).animate({opacity:0},900,"linear",function(){c(this).removeClass("hover")})})}(window,document,jQuery);